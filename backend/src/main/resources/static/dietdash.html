<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diet Page - Vision Fit</title>
    <style>
        body { font-family: Arial, sans-serif; display: flex; justify-content: space-between; padding: 20px; }
        .modal { width: 30%; padding: 20px; background: #f4f4f4; border-radius: 10px; }
        .input-group { margin-bottom: 15px; display: flex; justify-content: space-between; }
        .input-group label { flex: 1; }
        .input-group input, .input-group select { flex: 2; padding: 5px; }
        .search-container { width: 65%; }
        #search-bar { width: 100%; padding: 10px; font-size: 18px; }
        .food-result { margin-top: 20px; padding: 10px; background: #fff; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="modal">
        <h2>User Info</h2>
        <div class="input-group">
            <label for="username">Username:</label>
            <input type="text" id="username">
        </div>
        <div class="input-group">
            <label for="weight">Current Weight:</label>
            <input type="number" id="weight">
            <select id="metric">
                <option value="lb">lb</option>
                <option value="kg">kg</option>
            </select>
        </div>
        <div class="input-group">
            <label for="height">Height (feet):</label>
            <input type="number" id="height">
        </div>
    </div>

    <div class="search-container">
        <input type="text" id="search-bar" placeholder="Search for food..." onkeyup="searchFood(event)">
        <div id="results"></div>
    </div>

    <script>
        const API_KEY = "rYzH1pB46F9BsHel1beq4w==2dMCoBMLix22FUBM";

        async function searchFood(event) {
            if (event.key !== 'Enter') return;
            const query = document.getElementById("search-bar").value;
            const url = `https://api.calorieninjas.com/v1/nutrition?query=${encodeURIComponent(query)}`;

            try {
                const response = await fetch(url, {
                    method: "GET",
                    headers: { "X-Api-Key": API_KEY, "Content-Type": "application/json" }
                });
                if (!response.ok) throw new Error("API request failed");
                const data = await response.json();
                displayResults(data);
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }

        function displayResults(data) {
            const resultsDiv = document.getElementById("results");
            resultsDiv.innerHTML = "";
            
            data.items.forEach(item => {
                const div = document.createElement("div");
                div.classList.add("food-result");
                div.innerHTML = `<strong>${item.name}</strong><br>
                    Calories: ${item.calories} kcal<br>
                    Protein: ${item.protein_g} g<br>
                    Carbs: ${item.carbohydrates_total_g} g<br>
                    Fat: ${item.fat_total_g} g`;
                resultsDiv.appendChild(div);
            });
        }
    </script>
</body>
</html>
